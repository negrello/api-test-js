---
- description: get a pet
  data:
    url: ${PETSHOP_URI}/pet/1017
    method: GET
    options:
      headers:
        Accept: application/json
  asserts:
    status: 200
    schema: petshop/pet
    verifypath:
      - path: $.id
        expect: .to.deep.equal([1017])
    responsetime: 10000
#############################################################
- description: find a pet by sold status
  data:
    url: ${PETSHOP_URI}/pet/findBtStatus?status=sold
    method: GET
    options:
      headers:
        Accept: application/json
  asserts:
    status: 200
    responsetime: 10000
#############################################################
- description: delete first sold pet
  data:
    url: ${PETSHOP_URI}/pet/#($dependson, '$.pets[0].id')
    dependson: find a pet by sold status
    method: GET
    options:
      headers:
        Accept: application/json
  asserts:
    status: 200
    responsetime: 10000
#############################################################
- description: create a pet
  data:
    url: ${PETSHOP_URI}/pet/1017
    method: POST
    options:
      headers:
        Accept: application/json
      json:
        category:
          id: 1016,
          name: string
        name: Mell
        tags:
          - golden
  asserts:
    status:
      - 200
      - 409
    responsetime: 10000
#############################################################
- description: create and update a pet
  handler: petshop/petHandler
  before:
    - url: ${PETSHOP_URI}/pet
      method: POST
      options:
        headers:
          Accept: application/json
        json:
          category:
            id: 1016,
            name: string
          name: Mell
          tags:
            - golden
      asserts:
        status: 201
    - url: "#($beforeResponse0, '$.response.headers.location')"
      method: GET
      options:
        headers:
          Accept: application/json
      asserts:
        status: 200
        schema: petshop/pet
        verifypath:
          - path: $.tags[?(@.name == 'golden')]
  data:
    url: ${PETSHOP_URI}/pet/#($before1, '$.id')
    method: PUT
    options:
      headers:
        Accept: application/json
      json:
        category:
          id: 1016,
          name: string
        name: Mel
  asserts:
    status: 200
    schema: petshop/pet
    verifypath:
      - path: $.id
        expect: .to.deep.equal([1017])
    responsetime: 10000
  after:
    - url: ${PETSHOP_URI}/pet/#($before1, '$.id')
      method: DELETE
      options:
        headers:
          Accept: application/json
      asserts:
        status: 200
    - url: ${PETSHOP_URI}/pet/#($before1, '$.id')
      method: GET
      options:
        headers:
          Accept: application/json
      asserts:
        status: 404
